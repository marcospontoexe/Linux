<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Capítulo 7. Criptografia</title><meta name="generator" content="DocBook XSL Stylesheets V1.79.1" /><link rel="home" href="index.html" title="Guia Foca - Segurança" /><link rel="up" href="index.html" title="Guia Foca - Segurança" /><link rel="prev" href="ch06s15.html" title="Restrições no hardware do sistema" /><link rel="next" href="ch07s02.html" title="Introdução aos protocolos SSL e TLS" /></head><body text="black" link="#0000FF" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">Capítulo 7. Criptografia</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="ch06s15.html">Anterior</a> </td><th width="60%" align="center"> </th><td width="20%" align="right"> <a accesskey="n" href="ch07s02.html">Próximo</a></td></tr></table><hr /></div><div xmlns="" xmlns:fo="http://www.w3.org/1999/XSL/Format" class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Guia Foca - Segurança</a></span> &gt; <span class="breadcrumb-node">Criptografia</span></div><div class="chapter"><div class="titlepage"><div><div><h1 class="title"><a id="s-criptografia"></a>Capítulo 7. Criptografia</h1></div></div></div><div class="toc"><p><strong>Índice</strong></p><dl class="toc"><dt><span class="section"><a href="ch07.html#s-criptografia-intro">Introdução</a></span></dt><dt><span class="section"><a href="ch07s02.html">Introdução aos protocolos SSL e TLS</a></span></dt><dd><dl><dt><span class="section"><a href="ch07s02.html#s-criptografia-x509-ssl">SSL</a></span></dt><dt><span class="section"><a href="ch07s02.html#s-criptografia-x509-https">HTTPS</a></span></dt><dt><span class="section"><a href="ch07s02.html#s-criptografia-x509-maininmiddle">Ataque Man in the Middle (MITM)</a></span></dt><dt><span class="section"><a href="ch07s02.html#s-criptografia-x509-tls">TLS</a></span></dt></dl></dd><dt><span class="section"><a href="ch07s03.html">Introdução a Certificados</a></span></dt><dd><dl><dt><span class="section"><a href="ch07s03.html#s-criptografia-x509-intro-x509">Certificados X509</a></span></dt><dt><span class="section"><a href="ch07s03.html#s-criptografia-x509-intro-x509-expiration">Validade de Certificados</a></span></dt><dt><span class="section"><a href="ch07s03.html#s-criptografia-x509-intro-x509-intermCA">CA Intermediária</a></span></dt><dt><span class="section"><a href="ch07s03.html#s-criptografia-x509-intro-x509-certissuing">Como é gerado um Certificado assinado por CA?</a></span></dt><dt><span class="section"><a href="ch07s03.html#s-criptografia-x509-intro-x509-cert-extensions">Tipos de certificados e suas extensões</a></span></dt><dt><span class="section"><a href="ch07s03.html#s-criptografia-x509-intro-x509-structure">A estrutura básica de um certificado?</a></span></dt><dt><span class="section"><a href="ch07s03.html#s-criptografia-x509-intro-x509-extensions">Extensões para uso em certificados</a></span></dt></dl></dd><dt><span class="section"><a href="ch07s04.html">Cadeia de confiança de certificados</a></span></dt><dd><dl><dt><span class="section"><a href="ch07s04.html#s-criptografia-x509-trust-anchor-root-certificate">Certificado raíz</a></span></dt><dt><span class="section"><a href="ch07s04.html#s-criptografia-x509-trust-anchor-ssl-tls">Autenticação de Certificado SSL TLS</a></span></dt><dt><span class="section"><a href="ch07s04.html#s-criptografia-x509-trust-anchor-cert-types">Tipos de certificados</a></span></dt><dt><span class="section"><a href="ch07s04.html#s-criptografia-x509-trust-anchor-cert-fields">Significado de campos usados em certificados</a></span></dt><dt><span class="section"><a href="ch07s04.html#s-criptografia-x509-trust-anchor-validation-levels">Nívels de validação do certificado</a></span></dt></dl></dd><dt><span class="section"><a href="ch07s05.html">openssl</a></span></dt><dd><dl><dt><span class="section"><a href="ch07s05.html#s-criptografia-x509-openssl-opensslcnf">O arquivo de configuração <code class="filename">/etc/ssl/openssl.cnf</code></a></span></dt><dt><span class="section"><a href="ch07s05.html#s-criptografia-x509-openssl-viewcert">Visualizando conteúdo de um certificado existente</a></span></dt><dt><span class="section"><a href="ch07s05.html#s-criptografia-x509-openssl-convert">Convertendo entre formatos de certificados</a></span></dt></dl></dd><dt><span class="section"><a href="ch07s06.html">Gerenciamento de uma CA e de chaves publicas e privadas</a></span></dt><dd><dl><dt><span class="section"><a href="ch07s06.html#s-criptografia-x509-pubpriv-gerandorsa">Gerando uma chave RSA de 2048 bits</a></span></dt><dt><span class="section"><a href="ch07s06.html#s-criptografia-x509-pubpriv-gerando-pkcs8">Gerando uma chave PKCS8 de 2048 bits</a></span></dt><dt><span class="section"><a href="ch07s06.html#s-criptografia-x509-pubpriv-exp-arquivo">Exportando a chave RSA publica para arquivo</a></span></dt><dt><span class="section"><a href="ch07s06.html#s-criptografia-x509-pubpriv-protecting">Protegendo a chave privada</a></span></dt><dt><span class="section"><a href="ch07s06.html#s-criptografia-x509-pubpriv-procdiv-gerencCA">Requisitos para gerenciar uma CA</a></span></dt><dt><span class="section"><a href="ch07s06.html#s-criptografia-x509-pubpriv-creatingPrivCA">Criando uma CA privada</a></span></dt><dt><span class="section"><a href="ch07s06.html#s-criptografia-x509-pubpriv-creatingCACRT">Criando um certificado de CA</a></span></dt><dt><span class="section"><a href="ch07s06.html#s-criptografia-x509-pubpriv-CRTSigning">Assinando um arquivo CRT</a></span></dt><dt><span class="section"><a href="ch07s06.html#s-criptografia-x509-pubpriv-renew">Renovando um Certificado</a></span></dt><dt><span class="section"><a href="ch07s06.html#s-criptografia-x509-revoking-cert">Revogando um Certificado</a></span></dt><dt><span class="section"><a href="ch07s06.html#s-criptografia-x509-revoking-CA">Revogando uma CA</a></span></dt><dt><span class="section"><a href="ch07s06.html#s-criptografia-x509-pubpriv-genRSApair">Gerando um par de chaves RSA a partir da chave privada</a></span></dt><dt><span class="section"><a href="ch07s06.html#s-criptografia-x509-pubpriv-extractPubKeyfromPrivate">Extraindo a chave pública a partir da chave privada do certificado</a></span></dt><dt><span class="section"><a href="ch07s06.html#s-criptografia-x509-pubpriv-extractTextElements">Extraindo elementos texto do certificado</a></span></dt><dt><span class="section"><a href="ch07s06.html#s-criptografia-x509-pubpriv-GenPubkey">Gerando uma chave Pública</a></span></dt><dt><span class="section"><a href="ch07s06.html#s-criptografia-x509-pubpriv-Genrandfilekey">Gerando arquivo binário contendo números aleatórios</a></span></dt><dt><span class="section"><a href="ch07s06.html#s-criptografia-x509-pubpriv-fillautomation">Automatizando preenchimento de dados de certificado</a></span></dt><dt><span class="section"><a href="ch07s06.html#s-criptografia-x509-pubpriv-usingSNI">Usando SNI nos domínios</a></span></dt><dt><span class="section"><a href="ch07s06.html#s-criptografia-x509-pubpriv-criptobigfiles">Encriptando arquivos grandes</a></span></dt><dt><span class="section"><a href="ch07s06.html#s-criptografia-x509-pubpriv-apache-verlevels">Especificando níveis de validação no Apache</a></span></dt><dt><span class="section"><a href="ch07s06.html#s-criptografia-x509-pubpriv-apache-verlevels-test">Enviando um certificado SSL de cliente para testes</a></span></dt><dt><span class="section"><a href="ch07s06.html#s-criptografia-x509-pubpriv-id_check">Verificando uma identidade</a></span></dt></dl></dd><dt><span class="section"><a href="ch07s07.html">Certificados Auto-Assinados</a></span></dt><dd><dl><dt><span class="section"><a href="ch07s07.html#s-criptografia-x509-selfsigned-benefits">Beneficios de rodar uma CA própria</a></span></dt><dt><span class="section"><a href="ch07s07.html#s-criptografia-x509-selfsigned-certs-create">Criando Certificados Auto-Assinados</a></span></dt><dt><span class="section"><a href="ch07s07.html#s-criptografia-x509-selfsigned-certs-concat">Concatenando os Certificados gerados</a></span></dt><dt><span class="section"><a href="ch07s07.html#s-criptografia-x509-selfsigned-certs-cfg-apache">Configurando o Apache e Virtual Hosts</a></span></dt><dt><span class="section"><a href="ch07s07.html#s-criptografia-x509-selfsigned-certs-ssl-test">Testando a conexão SSL</a></span></dt><dt><span class="section"><a href="ch07s07.html#s-criptografia-x509-selfsigned-certs-ecc">Sobre certificados usando Curva Eliptica</a></span></dt><dt><span class="section"><a href="ch07s07.html#s-criptografia-x509-selfsigned-certs-graph-prgs">Programas para gerenciamento de CA usando ambiente gráfico e WEB</a></span></dt></dl></dd><dt><span class="section"><a href="ch07s08.html">Teste de cliente/servidor SSL/TLS com openssl</a></span></dt><dd><dl><dt><span class="section"><a href="ch07s08.html#s-criptografia-x509-clisrv-tst-srv">Servidor OpenSSL</a></span></dt><dt><span class="section"><a href="ch07s08.html#s-criptografia-x509-clisrv-tst-cli">Cliente OpenSSL</a></span></dt><dt><span class="section"><a href="ch07s08.html#s-criptografia-x509-clisrv-tst-cli-trustkey">Cadeia de Confiança</a></span></dt><dt><span class="section"><a href="ch07s08.html#s-criptografia-x509-clisrv-tst-cli-connupgrade">Testando protocolos que fazem upgrade para TLS</a></span></dt><dt><span class="section"><a href="ch07s08.html#s-criptografia-x509-clisrv-cert-extract">Extraindo o certificado remoto do cliente</a></span></dt><dt><span class="section"><a href="ch07s08.html#s-criptografia-x509-clisrv-tst-diff-handshakefmt">Usando formatos diferentes de HandShake de conexão</a></span></dt><dt><span class="section"><a href="ch07s08.html#s-criptografia-x509-clisrv-proto-tst">Testando o suporte a uma versão específica de protocolo SSL</a></span></dt><dt><span class="section"><a href="ch07s08.html#s-criptografia-x509-clisrv-cipher-tst">Testando o suporte a um conjunto de Ciphers</a></span></dt><dt><span class="section"><a href="ch07s08.html#s-criptografia-x509-clisrv-SNI-tst">Testando servidores que requerem SNI</a></span></dt><dt><span class="section"><a href="ch07s08.html#s-criptografia-x509-clisrv-connreuse-tst">Testando reuso de conexão no SSL</a></span></dt><dt><span class="section"><a href="ch07s08.html#s-criptografia-x509-clisrv-ocsp-validation">Validação de revogação OCSP</a></span></dt><dt><span class="section"><a href="ch07s08.html#s-criptografia-x509-clisrv-OCSP-stapling-tst">Testando o suporte a OCSP Stapling</a></span></dt><dt><span class="section"><a href="ch07s08.html#s-criptografia-x509-clisrv-CRL-revogation">Verificando a revogação de CRL</a></span></dt><dt><span class="section"><a href="ch07s08.html#s-criptografia-x509-clisrv-heartbleed-test">Verificando vulnerabilidade HeartBleed</a></span></dt><dt><span class="section"><a href="ch07s08.html#s-criptografia-x509-clisrv-DH-paramsize">Determinando o tamanho de parametros DH</a></span></dt></dl></dd><dt><span class="section"><a href="ch07s09.html">Certificados com extensões X509 V3</a></span></dt><dt><span class="section"><a href="ch07s10.html">Alternativas seguras a serviços sem criptografia</a></span></dt><dd><dl><dt><span class="section"><a href="ch07s10.html#d-cripto-http">http</a></span></dt><dt><span class="section"><a href="ch07s10.html#d-cripto-emails">Transmissão segura de e-mails</a></span></dt><dt><span class="section"><a href="ch07s10.html#d-cripto-pop3">Servidor pop3</a></span></dt><dt><span class="section"><a href="ch07s10.html#d-cripto-ftp">Transferência de arquivos</a></span></dt><dt><span class="section"><a href="ch07s10.html#d-cripto-rlogin">login remoto</a></span></dt><dt><span class="section"><a href="ch07s10.html#d-cripto-irc">Bate papo via IRC</a></span></dt><dt><span class="section"><a href="ch07s10.html#d-cripto-icq">Transmissão de mensagens via ICQ</a></span></dt></dl></dd><dt><span class="section"><a href="ch07s11.html">Usando o <span class="command"><strong>GPG</strong></span> para Autenticação e Criptografia</a></span></dt><dd><dl><dt><span class="section"><a href="ch07s11.html#d-cripto-gpg-pacote">Instalando o PGP</a></span></dt><dt><span class="section"><a href="ch07s11.html#d-cripto-gpg-criando">Criando um par de chaves pública/privada</a></span></dt><dt><span class="section"><a href="ch07s11.html#d-cripto-gpg-e">Encriptando Dados</a></span></dt><dt><span class="section"><a href="ch07s11.html#d-cripto-gpg-d">Decriptando dados com o GPG</a></span></dt><dt><span class="section"><a href="ch07s11.html#d-cripto-gpg-a">Assinando arquivos</a></span></dt><dt><span class="section"><a href="ch07s11.html#d-cripto-gpg-a-c">Checando assinaturas</a></span></dt><dt><span class="section"><a href="ch07s11.html#d-cripto-gpg-c-e">Extraindo sua chave pública do chaveiro</a></span></dt><dt><span class="section"><a href="ch07s11.html#d-cripto-gpg-c-a">Adicionando chaves públicas ao seu chaveiro pessoal</a></span></dt><dt><span class="section"><a href="ch07s11.html#d-cripto-gpg-c-l">Listando chaves de seu chaveiro</a></span></dt><dt><span class="section"><a href="ch07s11.html#d-cripto-gpg-c-d">Apagando chaves de seu chaveiro</a></span></dt><dt><span class="section"><a href="ch07s11.html#d-cripto-gpg-chpasswd">Mudando sua FraseSenha</a></span></dt><dt><span class="section"><a href="ch07s11.html#d-cripto-gpg-sign">Assinando uma chave digital</a></span></dt><dt><span class="section"><a href="ch07s11.html#d-cripto-gpg-c-sign-l">Listando assinaturas digitais</a></span></dt><dt><span class="section"><a href="ch07s11.html#d-cripto-gpg-c-sign-guia">Recomendações para a assinatura de chaves GPG</a></span></dt></dl></dd><dt><span class="section"><a href="ch07s12.html">Criptografia de blocos usando DM-Crypt / cryptsetup</a></span></dt><dd><dl><dt><span class="section"><a href="ch07s12.html#s-criptografia-fs-cryptsetup-setup">Encriptando um sistema de arquivos com DM-Crypto / cryptsetup</a></span></dt><dt><span class="section"><a href="ch07s12.html#s-criptografia-fs-cryptsetup-closing-dev">Desmontando o dispositivo criptografado</a></span></dt><dt><span class="section"><a href="ch07s12.html#s-criptografia-fs-cryptsetup-listando-limites">Listando limites e algoritmos suportados</a></span></dt><dt><span class="section"><a href="ch07s12.html#s-criptografia-fs-cryptsetup-benchmark">Avaliando a performance de cada algoritmo</a></span></dt><dt><span class="section"><a href="ch07s12.html#s-criptografia-fs-cryptsetup-crypto-options">Opções de encriptação com o DM-Crypt</a></span></dt><dt><span class="section"><a href="ch07s12.html#s-criptografia-fs-cryptsetup-header-dump">Fazendo dump do cabeçalho de dispositivos</a></span></dt><dt><span class="section"><a href="ch07s12.html#s-criptografia-fs-cryptsetup-keymng">Gerenciamento de chaves</a></span></dt><dt><span class="section"><a href="ch07s12.html#s-criptografia-fs-cryptsetup-keymng-brest">Backup e Restore de cabeçalho/chaves</a></span></dt><dt><span class="section"><a href="ch07s12.html#s-criptografia-fs-cryptsetup-reencrypt">Convertendo automaticamente sistemas para criptografia e desconvertendo</a></span></dt><dt><span class="section"><a href="ch07s12.html#s-criptografia-fs-cryptsetup-reencrypt-conv">Convertendo a partição para Criptografica</a></span></dt></dl></dd><dt><span class="section"><a href="ch07s13.html">Criptografia de arquivos usando ENCFS</a></span></dt><dd><dl><dt><span class="section"><a href="ch07s13.html#s-criptografia-fs-encfs-limitacoes">Limitações</a></span></dt><dt><span class="section"><a href="ch07s13.html#s-criptografia-fs-encfs-install">Instalando</a></span></dt><dt><span class="section"><a href="ch07s13.html#s-criptografia-fs-encfs-configurando">Criando a Criptografia</a></span></dt><dt><span class="section"><a href="ch07s13.html#s-criptografia-fs-encfs-pwChange">Alterando a senha</a></span></dt><dt><span class="section"><a href="ch07s13.html#s-criptografia-fs-encfs-fstab">Montando via fstab</a></span></dt></dl></dd><dt><span class="section"><a href="ch07s14.html">Usando o eCryptfs para encriptar arquivos, montagem automatica do home</a></span></dt><dd><dl><dt><span class="section"><a href="ch07s14.html#s-criptografia-fs-ecryptfs-manualcreating">Configurando o <span class="command"><strong>ecryptfs</strong></span></a></span></dt><dt><span class="section"><a href="ch07s14.html#s-criptografia-fs-ecryptfs-remount">Remontando o sistema de arquivos criptografado</a></span></dt><dt><span class="section"><a href="ch07s14.html#s-criptografia-fs-ecryptfs-ecryptfsd">ecryptfsd</a></span></dt><dt><span class="section"><a href="ch07s14.html#s-criptografia-fs-ecryptfs-privatehome">Diretório Privado Automático para o usuário</a></span></dt><dt><span class="section"><a href="ch07s14.html#s-criptografia-fs-ecryptfs-fullEncHome">Migrando o home do usuário para criptografado</a></span></dt><dt><span class="section"><a href="ch07s14.html#s-criptografia-fs-ecryptfs-PAMeCryptFS">PAM ecryptfs</a></span></dt><dt><span class="section"><a href="ch07s14.html#s-criptografia-fs-ecryptfs-limitacoes">Limitações do eCryptfs</a></span></dt></dl></dd><dt><span class="section"><a href="ch07s15.html">Criptografia usando TrueCrypt/VeraCrypt</a></span></dt></dl></div>
    <p>
    Esta capítulo documenta os conceitos, configuração, utilização e 
    manutenção de um ambiente utilizando criptografia para proteção de seus dados pessoais ou em
    nuvem. Com isso, você poderá tanto proteger um sistema local (seu PC/Notebook), ou um
    sistema que hospede em nuvem pública (Amazon, Google Cloud, Azure, Digital Ocean, etc.).
    </p>

<div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="s-criptografia-intro"></a>Introdução</h2></div></div></div><p>
Versão em vídeo desta seção pode estar disponível no canal do <span class="emphasis"><em>Guia Foca</em></span> no YouTube: 
<a class="link" href="https://rdr.guiafoca.org/gf-segur-cripto-x509" target="_top">Gerando e gerenciando certificados X509</a>.
</p><p>
A Criptografia basicamente tem o objetivo de proteger dados contra acesso indevido.
Existem diversas formas de criptografia que podem ser utilizados para proteger dados,
isso dependendo do seu armazenamento:
</p><div class="itemizedlist"><p>
Como exemplo, quando acessa um site usando <span class="emphasis"><em>SSL</em></span>, basicamente você está 
um canal criptografado e seguro, para que ninguém que esteja nos saltos entre sua origem e 
destino consiga capturar o tráfego sento trocado.
</p><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
   <span class="emphasis"><em>Arquivo, partições, disco</em></span> - Protege contra acesso
  indevido de dados do sistema local. Alguns exemplos de criptografia em sistemas
  de arquivos: <span class="emphasis"><em>GPG</em></span>, <span class="emphasis"><em>TrueCrypt</em></span>, <span class="emphasis"><em>
  DM-Crypto</em></span>, <span class="emphasis"><em>eCryptFS</em></span>.
  </p></li><li class="listitem"><p>
   <span class="emphasis"><em>Rede</em></span> - Protege contra acesso indevido aos dados sendo transmitidos 
   entre origem e destino. Exemplos de criptografia de rede para transmissão de dados 
   segura: <span class="emphasis"><em>SSL</em></span>, <span class="emphasis"><em>VPN</em></span>, <span class="emphasis"><em>Tuneis
   criptografados</em></span>, etc.
  </p></li><li class="listitem"><p>
   <span class="emphasis"><em>Integridade</em></span> - Mecanismos de criptografia podem também podem ser usados
   para garantir a integridade de dados ou atuar também em outras frentes, como a criptografia de 
   arquivos como é o caso do <span class="command"><strong>GPG</strong></span>. O <span class="command"><strong>GPG</strong></span> pode ser usado 
   tanto para assinar um arquivo transmitido por e-mail (garantindo que a fonte é quem diz ser),
   criptografar um arquivo e transmitir por um canal inseguro (assim somente o destinatário da mensagem
   poderá acessar o conteúdo), ou criptografar localmente um arquivo ou pasta. Outras formas 
   de integridade de sistemas incluem <span class="command"><strong>AIDA</strong></span> e <span class="command"><strong>Tripwire</strong></span>.
  </p></li></ul></div></div>











  
  











</div><HR xmlns="" xmlns:fo="http://www.w3.org/1999/XSL/Format"></HR><p class="copyright">Copyright © 1999-2020 - Gleydson Mazioli da Silva</p><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="ch06s15.html">Anterior</a> </td><td width="20%" align="center"> </td><td width="40%" align="right"> <a accesskey="n" href="ch07s02.html">Próximo</a></td></tr><tr><td width="40%" align="left" valign="top">Restrições no hardware do sistema </td><td width="20%" align="center"><a accesskey="h" href="index.html">Voltar ao Índice</a></td><td width="40%" align="right" valign="top"> Introdução aos protocolos SSL e TLS</td></tr></table></div></body></html>